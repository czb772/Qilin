# Qilin VLM实验复现总结

## 快速开始

### 1. 环境准备
```bash
# 安装依赖
cd baselines
pip install -r requirements.txt
```

### 2. 数据准备
```bash
# 下载数据集和模型
# 数据集: https://huggingface.co/datasets/THUIR/qilin
# 图像: https://cloud.tsinghua.edu.cn/d/af72ab5dbba1460da6c0/
# 模型: git clone https://huggingface.co/Qwen/Qwen2.5-VL-2B-Instruct model/Qwen2.5-VL-2B-Instruct
```

### 3. 运行实验

#### 原始实验（Qwen2-VL）
```bash
# 搜索任务
sh scripts/run.sh --config config/search_vlm_config.yaml --cuda 0

# 推荐任务  
sh scripts/run.sh --config config/recommendation_vlm_config.yaml --cuda 0
```

#### 替换实验（Qwen2.5-VL）
```bash
# 搜索任务
sh scripts/run.sh --config config/search_vlm_qwen25_2b_config.yaml --cuda 0

# 推荐任务
sh scripts/run.sh --config config/recommendation_vlm_qwen25_2b_config.yaml --cuda 0
```

## 关键配置修改

### 模型路径替换
- **原始**: `../model/Qwen2-VL-2B-Instruct/`
- **替换**: `../model/Qwen2.5-VL-2B-Instruct/`

### 内存优化
- 启用 `load_in_4bit: true`
- 启用 `gradient_checkpointing: true`
- 7B模型建议减小 `batch_size`

## 评估指标
- **主要指标**: MRR@10
- **其他指标**: NDCG@10, Recall@10, Precision@10
- **结果位置**: `eval_results/` 目录

## 故障排除
- **OOM错误**: 减小batch_size或使用gradient_checkpointing
- **模型加载失败**: 检查模型路径和文件完整性
- **数据加载错误**: 检查数据集路径和格式

## 预期改进
使用Qwen2.5-VL应该能获得比Qwen2-VL更好的性能，特别是在多模态理解和文本-图像对齐方面。
